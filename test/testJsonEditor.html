<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
    <title>JSON Editor Tests</title>
    <link rel="stylesheet" type="text/css" href="../jsunit/css/jsUnitStyle.css">

<script language="JavaScript" type="text/javascript" src="../jsoneditor/jquery-1.2.6.js"></script>
<script language="JavaScript" type="text/javascript" src="../jsoneditor/json2.js"></script>
<script language="JavaScript" type="text/javascript" src="../jsoneditor/jquery.timers.js"></script>
<script language="JavaScript" type="text/javascript" src="../jsoneditor/editor.js?r=346"></script>

<script language="JavaScript" type="text/javascript" src="../jsunit/app/jsUnitCore.js"></script>

<script language="JavaScript" type="text/javascript">

  function testLoadingFromTextArea() {
    var j = new JSONEditor($("#t"));
    assertTrue(j.getJSONText().search("a.title") > -1);
    assertEquals(j.getJSON()['name'], "a.title");
  }

  function testLoadingFromEmptyTextAreas() {
    var j = new JSONEditor($("#t_empty1"));
    assertEquals(j.getJSONText(), '{}');
    assertEquals(typeof j.getJSON(), 'object');

    j = new JSONEditor($("#t_empty2"));
    assertEquals(j.getJSONText(), '{}');
    assertEquals(typeof j.getJSON(), 'object');
  }

  function testSettingJsonFromText() {
    var j = new JSONEditor($("#t_empty1"));
    j.wrapped.get(0).value = '{"hello": "world"}';
    j.setJsonFromText();
    assertEquals(j.json['hello'], "world");
  }
  
  function testFixingOfReturnAndTabInText() {
    var j = new JSONEditor($("#t_returns_and_tabs"));
    assertEquals(j.json['hello'], 'wo\\nr\\tld');
    assertEquals(j.json['how'], 'g\\noe\\ts?');
  }
</script>
  </head>

  <body>
    <h1>JSON Editor Tests</h1>
    <p>This page contains tests for the JSON Editor using jsUnit. To see them, take a look at the source.</p>
  <p />&nbsp;</p>
  <p />&nbsp;</p>
  <p />&nbsp;</p>
  <p />&nbsp;</p>
  <p />&nbsp;</p>
  
  <textarea id="t">
    {
      "name": "a.title",
      "description": "foo.bar",
      "authors": [{
        "name": "p.foo",
        "link": "a | @href"
      }]
    }
  </textarea>
  
  <textarea id="t_empty1">{}</textarea>
  <textarea id="t_empty2">{}</textarea>
  <textarea id="t_returns_and_tabs">{"hello": "wo\nr\tld", "how": "g\\noe\\\ts?"}</textarea>

  <script>
  </script>

  </body>
</html>

